<div class="content-block" style="margin: 0px">
    <div class="header-content">
        <h2>View tracking</h2>
    </div>
    <div class="body-content">
        <div class="row col-md-12" style="margin: 0px;padding: 0px">
            <div class="col-md-3 form-group">
                <input class="form-control form-control-sm" type="text" [(ngModel)]="filter.tracking_code" (keydown.enter)="search()" placeholder="Tracking code">
            </div>
            <div class="col-md-3 form-group">
                <input class="form-control form-control-sm" type="text" [(ngModel)]="filter.sku" (keydown.enter)="search()" placeholder="Sku">
            </div>
            <div class="col-md-3 form-group">
                <input class="form-control form-control-sm" type="text"  [(ngModel)]="filter.order_code" (keydown.enter)="search()" placeholder="Order Code">
            </div>
            <div class="col-md-3 form-group">
                <select class="form-control form-control-sm"  [(ngModel)]="filter.type_tracking" (change)="search()" >
                    <option value="">-- Select Type Tracking --</option>
                    <option value="NORMAL">Normal</option>
                    <option value="SPLIT">Split</option>
                    <option value="UNKNOWN">Unknown</option>
                </select>
            </div>
            <div class="col-md-12 btn-group">
                <button class="btn btn-sm btn-rounded btn-outline-secondary" (click)="search()"><i class="fal fa-search"></i> Search</button>
                <button class="btn btn-sm btn-rounded btn-outline-secondary" (click)="refresh()"><i class="fal fa-refresh"></i> Reset</button>
            </div>
            <div class="col-md-12"  style="margin: 0px;padding: 0px">
                <div class="row list-summary">
                    <div class="col-md-6">
                        <span i18n>Showing</span>
                        <select class="form-control-sm select-custom"
                                [(ngModel)]="filter.limit" (change)="search()">
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="all">All</option>
                        </select>
                        <span>of page {{filter.page}} in {{gettotalPage()}} page in total {{total}} items</span>
                    </div>
                    <div class="col-md-6">
                        <pagination [boundaryLinks]="true"
                                    [totalItems]="total"
                                    (pageChanged)="handlePagination($event)"
                                    [maxSize]="10"
                                    [itemsPerPage]="filter.limit" class="pagination-sm pull-right"
                                    [rotate]="false">
                        </pagination>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="body-content">
        <div class="row ">
            <div class="col-md-12">
                <table class="table table-striped">
                    <thead>
                    <tr>
                        <th width="40%">Package Info</th>
                        <th width="30%">Order Info</th>
                        <th width="30%">Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    <ng-container *ngFor="let packTr of data">
                        <tr>
                            <td>
                                <div>Status: <b>{{packTr.status}}</b></div>
                                <div>Package Code: <b>{{packTr.package_code}}</b></div>
                                <div>Tracking WS: <b>{{packTr.ws_tracking_code}}</b></div>
                                <div>Manifest Code: <b>{{packTr.manifest_code}}</b></div>
                                <div>Weight: <b>{{packTr.weight}}</b></div>
                                <div>Dimentsion: <b>{{packTr.dimention_w}}</b>x<b>{{packTr.dimention_l}}</b>x<b>{{packTr.dimention_h}}</b></div>
                                <div>Warehouse Received: <b>{{packTr.manifest.receiveWarehouse.name}}</b></div>
                                <div>Type: <b>{{packTr.type_tracking}}</b></div>
                            </td>
                            <td>
                                <ng-container *ngIf="!packTr.order">
                                    <h4 style="color: red">Cannot find order {{packTr.order_id ? 'with order id ' + packTr.order_id: ''}}!</h4>
                                </ng-container>
                                <ng-container *ngIf="packTr.order">
                                    <div>Order Code: <b>{{packTr.order.ordercode}}</b></div>
                                    <div>Customer Id: <b>{{packTr.order.customer_id}}</b></div>
                                    <div>Receiver: <b>{{packTr.order.receiver_name}} / {{packTr.order.receiver_phone}} / {{packTr.order.receiver_address}}
                                                ( {{packTr.order.receiver_district_name}}, {{packTr.order.receiver_province_name}}  ){{packTr.order.receiver_post_code ? ' ('+packTr.order.receiver_post_code+')' : ''}}</b></div>
                                    <hr>
                                </ng-container>
                            </td>
                            <td>
                                <div class="row col-md-12 show-status" *ngIf="packTr.stock_in_us">
                                    <div class="col-md-6">
                                        Kho mỹ
                                    </div>
                                    <div class="col-md-6">
                                        {{ packTr.stock_in_us * 1000 | date:'dd/MM/yyyy HH:mm:ss '}}
                                    </div>
                                </div>
                                <div class="row col-md-12 show-status" *ngIf="packTr.stock_in_us && packTr.stock_out_us">
                                    <div class="col-md-6">
                                        Vận chuyển QT
                                    </div>
                                    <div class="col-md-6">
                                        {{ packTr.stock_out_us * 1000 | date:'dd/MM/yyyy HH:mm:ss '}}
                                    </div>
                                </div>
                                <div class="row col-md-12 show-status" *ngIf="packTr.stock_in_us && packTr.stock_out_us && packTr.stock_in_local">
                                    <div class="col-md-6">
                                        Kho Việt Nam
                                    </div>
                                    <div class="col-md-6">
                                        {{ packTr.stock_in_local  * 1000 | date:'dd/MM/yyyy HH:mm:ss '}}
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </ng-container>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>