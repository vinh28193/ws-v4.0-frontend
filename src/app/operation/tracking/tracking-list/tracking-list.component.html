<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title m-b-0" i18n>Tracking Code</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-12">
                        <form [formGroup]="searchForm" name="formSearch" class="row item-filter-option">
                            <div class="col-md-4 form-group m-b-10">
                                <label for="q" class="form-control-label" i18n>Keyword...</label>
                                <input class="form-control form-control-sm" id="q" formControlName="q"
                                       type="text" (keyup.enter)="search()">
                            </div>
                            <div class="col-md-4 form-group m-b-10">
                                <div class="button-group" style="margin-top: 1.7rem;">
                                    <button class="btn btn-sm btn-success" (click)="search()" i18n>Search</button>
                                </div>
                            </div>
                        </form>
                        <div class="row">
                            <div class="col-md-12">
                                <hr class="mt-2 mb-2">
                            </div>
                        </div>
                        <div class="row mb-2 toolbar">
                            <div class="col-md-12">
                                <div class="button-group">
                                    <button class="btn btn-sm btn-success" (click)="openUsSendingModal()" i18n>Us Sending</button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="content-block" style="border-bottom: none">
                                    <div class="header-content">
                                        <h4>List Manifest</h4>
                                        <div class="col-md-12">
                                            <div class="row list-summary">
                                                <div class="col-md-6">
                                                    <span i18n>Showing</span>
                                                    <select class="form-control-sm select-custom"
                                                            [(ngModel)]="perPage" (change)="search()">
                                                        <option value="20">20</option>
                                                        <option value="50">50</option>
                                                        <option value="100">100</option>
                                                        <option value="200">200</option>
                                                        <option value="all">All</option>
                                                    </select>
                                                    <span>of page {{currentPage}} in {{pageCount}} page in total {{totalCount}} items</span>
                                                </div>
                                                <div class="col-md-6">
                                                    <pagination [boundaryLinks]="true"
                                                                [totalItems]="totalCount"
                                                                (pageChanged)="handlePagination($event)"
                                                                [maxSize]="10"
                                                                [itemsPerPage]="perPage" class="pagination-sm pull-right"
                                                                [rotate]="true">
                                                    </pagination>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="body-content">
                                        <ul class="list-group custom-list">
                                            <ng-container *ngFor="let manifest of manifests;let ind = index">
                                                <li class="list-group-item custom-list-item {{manifest.manifest_code == '' ? 'active' : ind == 0 ? 'active' : '' }}">
                                                    <h4  style="color: #fff">{{manifest.manifest_code}}</h4>
                                                    <div>Id: <b>{{manifest.manifest_id}}</b></div>
                                                    <div>Receive Warehouse:
                                                        <b>{{manifest.receiveWarehouse ? manifest.receiveWarehouse.name : ''}}</b>
                                                    </div>
                                                    <div>Send Warehouse:
                                                        <b>{{manifest.sendWarehouse ? manifest.sendWarehouse.name : ''}}</b>
                                                    </div>
                                                </li>
                                            </ng-container>
                                        </ul>
                                    </div>
                                    <div class="content-block" style="border: 2px solid #2e5cde">
                                        <div class="header-content" style="background: #2e5cde;">
                                            <h4 style="color: #fff">Tracking Info</h4>
                                            <div class="col-md-12">
                                                <div class="row list-summary">
                                                    <div class="col-md-6">
                                                        <span i18n>Showing</span>
                                                        <select class="form-control-sm select-custom"
                                                                [(ngModel)]="perPage" (change)="search()">
                                                            <option value="20">20</option>
                                                            <option value="50">50</option>
                                                            <option value="100">100</option>
                                                            <option value="200">200</option>
                                                            <option value="all">All</option>
                                                        </select>
                                                        <span>of page {{currentPage}} in {{pageCount}} page in total {{totalCount}} items</span>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <pagination [boundaryLinks]="true"
                                                                    [totalItems]="totalCount"
                                                                    (pageChanged)="handlePagination($event)"
                                                                    [maxSize]="10"
                                                                    [itemsPerPage]="perPage" class="pagination-sm pull-right"
                                                                    [rotate]="true">
                                                        </pagination>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="body-content">
                                            <table class="table table-primary">
                                                <thead>
                                                <tr>
                                                    <th width="25%">Tracking Complete</th>
                                                    <th width="25%">Tracking Wasting</th>
                                                    <th width="25%">Tracking Missing</th>
                                                    <th width="25%">Tracking Unknown</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td width="25%"><input [(ngModel)]="trackingComplete" (change)="search('tracking')" (keydown.enter)="search('tracking')" class="form-control form-control-sm" placeholder="Tracking complete"></td>
                                                    <td width="25%"><input [(ngModel)]="trackingWast" (change)="search('tracking')" (keydown.enter)="search('tracking')" class="form-control form-control-sm" placeholder="Tracking wasting"></td>
                                                    <td width="25%"><input [(ngModel)]="trackingMiss" (change)="search('tracking')" (keydown.enter)="search('tracking')" class="form-control form-control-sm" placeholder="Tracking missing"></td>
                                                    <td width="25%"><input [(ngModel)]="trackingUnknown" (change)="search('tracking')" (keydown.enter)="search('tracking')" class="form-control form-control-sm" placeholder="Tracking unknown"></td>
                                                </tr>
                                                <tr id="content-tracking-info" >
                                                    <td>
                                                        <ul class="list-group">
                                                            <ng-container *ngFor="let packTr of tracks.draftPackageItems">
                                                                <li class="list-group-item">
                                                                    <h6>{{packTr.tracking_code}}</h6>
                                                                    <div>Warehouse Tag: <b>{{packTr.warehouse_tag_boxme}}</b></div>
                                                                    <div>Order Id: <b>{{packTr.order_id}}</b></div>
                                                                    <div>Product Id: <b>{{packTr.product_id}}</b></div>
                                                                    <div>Item Name: <b>{{packTr.item_name}}</b></div>
                                                                    <div>Quantity: <b>{{packTr.quantity}}</b></div>
                                                                    <div>Purchase invoice: <b>{{packTr.purchase_invoice_number}}</b></div>
                                                                    <div>Weight: <b>{{packTr.weight}}</b> (gram)</div>
                                                                    <div>Dimension (H x L x W): <b>{{packTr.dimension_h}} x {{dimension_l}} x {{dimension_w}}</b> (cm)</div>
                                                                    <div>Note BM: <b>{{packTr.note_boxme}}</b></div>
                                                                    <div>Status: <b>{{packTr.status}}</b></div>
                                                                    <div class="mb-1">
                                                                        <strong>List Image</strong>
                                                                        <div class="col-md-12 row">
                                                                            <div class="col-md-6" style="padding: 0px" *ngFor="let img of getListImage(packTr.image)" >
                                                                                <img *ngIf="img && img !== 'None'" src="{{img}}" class="img-thumbnail img-responsive" >
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <p><a href="javascript:void (0)"><i class="fa fa-chain-broken"></i> Split tracking</a></p>
                                                                    </div>
                                                                </li>
                                                            </ng-container>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <ul class="list-group">
                                                            <ng-container *ngFor="let packTr of tracks.draftWastingTrackings">
                                                                <li class="list-group-item">
                                                                    <h6>{{packTr.tracking_code}}</h6>
                                                                    <div>Warehouse Tag: <b>{{packTr.warehouse_tag_boxme}}</b></div>
                                                                    <div>Order Id: <b>{{packTr.order_id}}</b></div>
                                                                    <div>Product Id: <b>{{packTr.product_id}}</b></div>
                                                                    <div>Item Name: <b>{{packTr.item_name}}</b></div>
                                                                    <div>Quantity: <b>{{packTr.quantity}}</b></div>
                                                                    <div>Purchase invoice: <b>{{packTr.purchase_invoice_number}}</b></div>
                                                                    <div>Weight: <b>{{packTr.weight}}</b> (gram)</div>
                                                                    <div>Dimension (H x L x W): <b>{{packTr.dimension_h}} x {{dimension_l}} x {{dimension_w}}</b> (cm)</div>
                                                                    <div>Note BM: <b>{{packTr.note_boxme}}</b></div>
                                                                    <div>Status: <b>{{packTr.status}}</b></div>
                                                                    <div class="mb-1">
                                                                        <strong>List Image</strong>
                                                                        <div class="col-md-12 row">
                                                                            <div class="col-md-6" style="padding: 0px" *ngFor="let img of getListImage(packTr.image)" >
                                                                                <img *ngIf="img && img !== 'None'" src="{{img}}" class="img-thumbnail img-responsive" >
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <p><a href="javascript:void (0)" (click)="showMergeTracking(packTr.tracking_code)"><i class="fa fa-chain"></i> Merge tracking</a></p>
                                                                    </div>
                                                                </li>
                                                            </ng-container>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <ul class="list-group">
                                                            <ng-container *ngFor="let packTr of tracks.draftMissingTrackings">
                                                                <li class="list-group-item">
                                                                    <h6>{{packTr.tracking_code}}</h6>
                                                                    <div>Warehouse Tag: <b>{{packTr.warehouse_tag_boxme}}</b></div>
                                                                    <div>Order Id: <b>{{packTr.order_id}}</b></div>
                                                                    <div>Product Id: <b>{{packTr.product_id}}</b></div>
                                                                    <div>Item Name: <b>{{packTr.item_name}}</b></div>
                                                                    <div>Quantity: <b>{{packTr.quantity}}</b></div>
                                                                    <div>Purchase invoice: <b>{{packTr.purchase_invoice_number}}</b></div>
                                                                    <div>Weight: <b>{{packTr.weight}}</b> (gram)</div>
                                                                    <div>Dimension (H x L x W): <b>{{packTr.dimension_h}} x {{dimension_l}} x {{dimension_w}}</b> (cm)</div>
                                                                    <div>Note BM: <b>{{packTr.note_boxme}}</b></div>
                                                                    <div>Status: <b>{{packTr.status}}</b></div>
                                                                    <div class="mb-1">
                                                                        <strong>List Image</strong>
                                                                        <div class="col-md-12 row">
                                                                            <div class="col-md-6" style="padding: 0px" *ngFor="let img of getListImage(packTr.image)" >
                                                                                <img *ngIf="img && img !== 'None'" src="{{img}}" class="img-thumbnail img-responsive" >
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <p><a href="javascript:void (0)" (click)="showMergeTracking(packTr.tracking_code)"><i class="fa fa-chain"></i> Merge tracking</a></p>
                                                                    </div>
                                                                </li>
                                                            </ng-container>
                                                        </ul>
                                                    </td>
                                                    <td>
                                                        <ul class="list-group">
                                                            <ng-container *ngFor="let packTr of tracks.unknownTrackings">
                                                                <li class="list-group-item">
                                                                    <h6>{{packTr.tracking_code}}</h6>
                                                                    <div>Warehouse Tag: <b>{{packTr.warehouse_tag_boxme}}</b></div>
                                                                    <div>Order Id: <b>{{packTr.order_id}}</b></div>
                                                                    <div>Product Id: <b>{{packTr.product_id}}</b></div>
                                                                    <div>Item Name: <b>{{packTr.item_name}}</b></div>
                                                                    <div>Quantity: <b>{{packTr.quantity}}</b></div>
                                                                    <div>Purchase invoice: <b>{{packTr.purchase_invoice_number}}</b></div>
                                                                    <div>Weight: <b>{{packTr.weight}}</b> (gram)</div>
                                                                    <div>Dimension (H x L x W): <b>{{packTr.dimension_h}} x {{dimension_l}} x {{dimension_w}}</b> (cm)</div>
                                                                    <div>Note BM: <b>{{packTr.note_boxme}}</b></div>
                                                                    <div>Status: <b>{{packTr.status}}</b></div>
                                                                    <div class="mb-1">
                                                                        <strong>List Image</strong>
                                                                        <div class="col-md-12 row">
                                                                            <div class="col-md-6" style="padding: 0px" *ngFor="let img of getListImage(packTr.image)" >
                                                                                <img *ngIf="img && img !== 'None'" src="{{img}}" class="img-thumbnail img-responsive" >
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div>
                                                                        <p><a href="javascript:void (0)"><i class="fa fa-map-marker"></i> Map Product - Order Id</a></p>
                                                                    </div>
                                                                </li>
                                                            </ng-container>
                                                        </ul>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div bsModal #usSendingModal="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body p-0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card m-b-0">
                            <div class="card-body">
                                <div class="card-title">
                                    <h3 i18n>Create Manifest From List Warehouse Us Send List Tracking</h3>
                                </div>
                                <form [formGroup]="usSendingForm" name="form" class="row form-upload">
                                    <div class="col-md-12 form-body">
                                        <div class="row">
                                            <div class="col-md-6 form-group m-b-10">
                                                <label for="store" class="form-control-label" >Store</label>
                                                <select class="form-control form-control-sm" name="store" id="store"
                                                        formControlName="store">
                                                    <option value="" i18n>--Select Store--</option>
                                                    <option value="vn">Việt nam</option>
                                                    <option value="id">Indonesia</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 form-group m-b-10">
                                                <label for="store" class="form-control-label" i18n> Pickup Warehouse</label>
                                                <select class="form-control form-control-sm" name="warehouse" id="warehouse"
                                                        formControlName="warehouse">
                                                    <option *ngFor="let wh of warehouses" [value]="wh.key">{{wh.value}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6 form-group m-b-10">
                                                <label for="manifest" class="form-control-label"  i18n> Name Manifest</label>
                                                <input type="text" class="form-control form-control-sm"  placeholder="18042019-LOWS-VN-HN003" id="manifest" name="manifest"
                                                       formControlName="manifest">
                                            </div>
                                            <div class="col-md-6 form-group m-b-10">
                                                <label for="store" class="form-control-label" i18n>Upload</label>
                                                <span i18n>(Download File excel ,Example : TrackingCode.xlsx)</span>
                                                <input type="file" id="file" formControlName="file" class="form-control form-control-sm" (change)="handleFileChange($event)">
                                            </div>
                                        </div>
                                      <div class="row">
                                        <div class="col-md-6 form-group m-b-10">
                                          <label for="manifest" class="form-control-label" i18n>SetUp Time In Us WareHosue</label>
                                          <input type="text" class="form-control" i18n-placeholder="Datepicker" placeholder="Datepicker" bsDatepicker formControlName="date" />
                                        </div>
                                      </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="button-group">
                                                    <button class="btn btn-sm btn-success" (click)="create()" i18n>Create</button>
                                                    <button class="btn btn-sm btn-warning" i18n>Cancel</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div bsModal #mergeTracking="bs-modal" class="modal fade" tabindex="-1" role="dialog"
     aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body p-0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card m-b-0">
                            <div class="card-body">
                                <div class="card-title">
                                    <h3 i18n>Merge tracking {{trackingMerge}}</h3>
                                </div>
                                <div class="col-md-12 form-body">
                                    <div class="row">
                                        <div class="col-md-6 form-group m-b-10">
                                            <label for="store" class="form-control-label" >Tracking merge</label>
                                            <input type="text" disabled class="form-control form-control-sm" value="{{trackingMerge}}" >
                                        </div>
                                        <div class="col-md-6 form-group m-b-10">
                                            <label for="store" class="form-control-label" >Tracking target</label>
                                            <input type="text" class="form-control form-control-sm" [(ngModel)]="trackingTarget" placeholder="Enter tracking target" >
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="button-group">
                                                <button class="btn btn-sm btn-success" (click)="merge()" i18n>Merge</button>
                                                <button class="btn btn-sm btn-warning" (click)="mergeTracking.hide()" i18n>Cancel</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>